---
import { tv, type VariantProps } from 'tailwind-variants/lite'
import type { HTMLAttributes } from 'astro/types'

const button = tv({
  base: 'text-xl py-3 px-5 rounded-lg active:opacity-80 cursor-pointer transition shrink-0 text-center',
  variants: {
    intent: {
      primary: 'bg-brand-500 hover:bg-brand-600 text-white',
      secondary: 'bg-alt-600 hover:bg-alt-700',
      ghost: 'bg-transparent hover:bg-brand-500/25 border border-inherit',
    },
  },
})

type ComponentStyles = VariantProps<typeof button> & {
  intent?: keyof typeof button.variants.intent
}

type ButtonProps = {
  href?: undefined
  type?: 'button' | 'submit' | 'reset'
} & HTMLAttributes<'button'>

type AnchorProps = {
  href: string
  type?: undefined
} & HTMLAttributes<'a'>

export type Props =
  | (ButtonProps & ComponentStyles)
  | (AnchorProps & ComponentStyles)

const {
  intent = 'primary',
  class: className,
  href,
  ...rest
} = Astro.props as Props

const Element = href ? 'a' : 'button'
---

<Element {...rest} href={href} class={button({ intent, className })}
  ><slot /></Element
>
